<script type="text/ng-template"  id="/template/gigEdit.html">
    <form name="gigForm" data-ng-submit="submit(gigForm)" novalidate>
        <div class="modal-header">
            <h3 class="modal-title" id="modal-title">Edit Gig</h3>
        </div>
        <div class="modal-body" id="modal-body">

            <div class="alert alert-danger" data-ng-if="errorMessage">{{ errorMessage }}</div>
            <div class="alert alert-success" data-ng-if="successMessage">{{ successMessage }}</div>

            <div class="form-group" data-ng-class="{ 'has-error': gigForm.$submitted && gigForm.contractorId.$invalid }">
                <label for="contractorId">Contractor</label>
                <div>
                    <select id="contractorId" 
                            name="contractorId" 
                            style="width: 100%"
                            kendo-dropdownlist="contractorDropdown" 
                            options="contractorDropdownOptions" 
                            ng-model="form.contractorId" 
                            required>
                    </select>
                    <div ng-messages="gigForm.contractorId.$error" role="alert" ng-if="gigForm.$submitted">
                        <p class="help-block" ng-message="required">Select a contractor</p>
                    </div>
                </div>
            </div>

            <div class="form-group" data-ng-class="{ 'has-error': gigForm.$submitted && gigForm.name.$invalid }">
                <label for="gig_name">Description</label>
                <input type="text" 
                       name="name" 
                       kendo-combo-box
                       options="descriptionsComboOptions"
                       data-ng-model="form.name" 
                       id="gig_name" 
                       style="width: 100%;"
                       required />
                <div ng-messages="gigForm.name.$error" role="alert" ng-if="gigForm.$submitted">
                    <p class="help-block" ng-message="required">Enter a description</p>
                </div>
            </div>

            <div class="form-group" data-ng-class="{ 'has-error': gigForm.$submitted && gigForm.place.$invalid }">
                <label for="place">Location</label>
                <input type="text" 
                       id="place" 
                       name="place" 
                       class="form-control"
                       g-places-autocomplete 
                       data-force-selection="true"
                       data-ng-model="form.place"
                       autocomplete="off" 
                       required />
                <div ng-messages="gigForm.name.$error" role="alert" ng-if="gigForm.$submitted">
                    <p class="help-block" ng-message="required">Choose a location</p>
                </div>
            </div>
            
            <div class="form-group" data-ng-class="{ 'has-error': gigForm.$submitted && gigForm.startDate.$invalid }">
                <label for="startDate">Start</label>
                <input name="startDate" 
                       type="text"
                       id="startDate" 
                       style="width: 100%" 
                       kendo-date-time-picker 
                       ng-model="form.startDate" 
                       required />
                <div ng-messages="gigForm.startDate.$error" role="alert" ng-if="gigForm.$submitted">
                    <p class="help-block" ng-message="required">Choose a start date/time</p>
                    <p class="help-block" ng-message="date">Invalid date format</p>
                </div>
            </div>

            <div class="form-group" data-ng-class="{ 'has-error': gigForm.$submitted && gigForm.endDate.$invalid }">
                <label for="endDate">End</label>
                <input name="endDate"  
                       type="text"
                       id="endDate" 
                       style="width: 100%" 
                       kendo-date-time-picker 
                       ng-model="form.endDate" 
                       required />
                <div ng-messages="gigForm.endDate.$error" role="alert" ng-if="gigForm.$submitted">
                    <p class="help-block" ng-message="required">Choose an end date/time</p>
                    <p class="help-block" ng-message="date">Invalid date format</p>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 form-group">
                    <label for="distance">Distance (miles)</label>
                    <input name="distance" 
                           id="distance" 
                           kendo-numeric-text-box
                           options="distanceOptions"
                           data-ng-model="form.distance" />
                </div>
                <div class="col-md-4 form-group">
                    <label for="duration">Travel Time (minutes)</label>
                    <input name="duration" 
                           id="duration" 
                           kendo-numeric-text-box
                           options="durationOptions"
                           data-ng-model="form.duration" />
                </div>
                <div class="col-md-4 form-group">
                    <br/>
                    <a class="btn btn-default" 
                       id="estimate_button" 
                       data-ng-click="estimateDistance()" 
                       data-loading-text="<i class='fa fa-spinner fa-spin'></i> Estimating...">
                       <i class="fa fa-car"></i> Estimate
                    </a>
                </div>
            </div>

            <div class="form-group">
                <label for="tags">Tags</label>
                <select id="tags"
                        name="tags"
                        kendo-multi-select 
                        options="tagDropdownOptions" 
                        k-ng-model="form.tags"></select>
            </div>

            <div class="form-group">
                <label for="notes">Notes</label>
                <textarea id="notes" name="notes" class="form-control" data-ng-model="form.notes"></textarea>
            </div>
        </div>

        <div class="modal-footer">
            <!--<a class="btn btn-default" 
               data-ng-click="prev()"
               data-ng-disabled="!hasPrev()">
                <i class="fa fa-chevron-left"></i> Prev
            </a>
            <a class="btn btn-default" 
               data-ng-click="next()"
               data-ng-disabled="!hasNext()">
                Next <i class="fa fa-chevron-right"></i>
            </a>-->

            <button class="btn btn-primary" 
                    id="save_button" 
                    type="submit" 
                    data-loading-text="<i class='fa fa-spinner fa-spin'></i> Saving...">
                    <i class="fa fa-check"></i> Save
            </button>
            <button class="btn btn-warning" 
                    id="cancel_button" 
                    type="button" 
                    data-ng-click="cancel()">
                    <i class="fa fa-times"></i> Cancel
            </button>
        </div>
    </form>
</script>